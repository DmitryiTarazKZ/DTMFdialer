<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes, minimum-scale=1.0">
    <meta name="description" content="">
    <title>Help</title>

    <link href="css/style.css" rel="stylesheet">
</head>

<body>
<div class="wrapper">

    <p>Данное приложение разработано для обеспечения связью мест, в которых сотовая сеть полностью отсутствует из-за естественных преград.
        Установленное на смартфон (использовался HUAWEI P10 Lite), работающий в паре с радиостанцией (использовалась Baofeng U82R),
        это приложение позволяет использовать удаленную (вторую) радиостанцию в качестве телефона с кнопочным набором номера.
    </p>

    <p>
        <a href="https://docs.google.com/document/d/11V85TszpjSIRdUP7-xZMcCDTanOoCAFf/edit?usp=sharing&ouid=100771586473379818395&rtpof=true&sd=true" title="DOC документ">
            <span class="red">Инструкция по использованию для печати</span>
        </a>
    </p>

    <p><strong>Принцип работы:</strong> При запуске приложения запускается программный DTMF анализ. При <strong>входящем вызове</strong> на время произнесения
        речевого сообщения о входящем вызове срабатывает VOX-система <strong>радиостанции репитера</strong> и включает ее на передачу, которая
        на любой выбранной частоте транслирует речевое сообщение о входящем вызове на <strong>радиостанцию абонента</strong>. Периодически между
        сообщениями появляется временной промежуток; в этот промежуток тишины VOX-система отключается, и радиостанция репитера снова встает в режим приема.
        Это позволяет принять или отклонить вызов, и если на <strong>радиостанции абонента</strong> нажать комбинацию PTT + (звездочка) то на выбранной
        частоте транслируется DTMF тон клавиши (звездочка), который принимается <strong>радиостанцией репитера</strong>, а затем подается на аудиовход
        смартфона, в котором с помощью данного приложения и алгоритма преобразования Фурье распознается как команда принять входящий вызов. Нажатие
        комбинации PTT + (решетка) отклоняет или завершает вызов.<br>
    </p>
    <p>Для выполнения <strong>исходящего вызова</strong> на <strong>радиостанции абонента</strong> необходимо, удерживая клавишу передачи PTT, нажимать
        соответствующие клавиши набора номера; при этом на выбранной частоте будут транслироваться тона набираемых цифр, которые принимаются
        <strong>радиостанцией репитера</strong> и затем через разъем гарнитуры подаются на аудиовход смартфона, в котором с помощью данного приложения
        и алгоритма преобразования Фурье распознаются и преобразуются в соответствующую цифру или символ. Затем цифры объединяются в номер абонента, и по
        распознаванию команды PTT + (звездочка) выполняется вызов. При этом нажатие комбинации PTT + (решетка) служит для очистки поля набора номера.
        Нажатие комбинации PTT + (решетка) при поднятой трубке приведет к завершению вызова. Во время беседы (а также при всех речевых сообщениях) в работу
        в нужные моменты включается VOX система, которая включает <strong>радиостанцию репитера</strong> на передачу.
    </p>

    <p>
    <span class="blue">
        <strong>Плюсы подхода:</strong> максимальная простота конструкции, состоящей всего из трех элементов: радиостанция, смартфон и аудиокабель (в автономном режиме).
        Полноценный прием, отклонение и завершение вызова. Возможность оперативного развертывания связи, например, для чрезвычайных ситуаций в труднодоступных местностях
        (желательно предварительное планирование по профилю рельефа с помощью Google Earth для выбора точки расположения репитера). Возможность простого внедрения в
        любые существующие одноканальные и двухканальные системы связи, поддерживающие DTMF набор. Одинаковая дальность на прием и на передачу (при использовании одинаковых
        радиостанций в одноканальном режиме или при незначительном разносе частот в двухканальном).<br><br>

        <strong>Минусы подхода:</strong> специфические неудобства из-за VOX-системы, создающей небольшие задержки в направлении: звонящий из сотовой сети → репитер
        → рация абонента. Абоненту, звонящему из сотовой сети, после окончания предложения нужно выдерживать паузу, чтобы радиостанция репитера переключилась на прием,
        а абоненту с радиостанцией нужно дожидаться, пока радиоканал освободится, и лишь потом говорить. Также если со стороны звонящего из сотовой сети кроме речи абонента
        присутствуют посторонние звуки например шум машин на улице итд то это будет заставлять радиостанцию репитера включаться на передачу и так как направление сотовая сеть →
        репитер → радиостанция является приоритетным (даже если первым начал говорить абонент с рацией любой звук с сотовой сети то есть со смартфона будет переключать
        радиостанцию репитера на передачу) будет теряться часть речи говорящего по рации. VOX радиостанции должна работать очень стабильно и качественно, так как ее работа
        является основой данного подхода.<br><br>

        <strong>Дополнительно:</strong> При удержании комбинации PTT+F (41 пункт в настройках рации выставлен на 1750 Гц) на время удержания включится вспышка, что может
        быть полезно для обнаружения устройства в ночное время. Также специальными командами можно настраивать громкость речевых сообщений, громкость вызова
        и длительность тона активации (чтобы подстроиться под работу VOX-системы конкретной радиостанции) а также контролировать и настраивать время удержания и открытия
        VOX.<br><br>
    </span>
    </p>

    <a href="https://drive.google.com/file/d/1VFIEPVdHqlI0MIZiPcVUOTBEnhonHgzB/view?usp=sharing" title="Изображение">
        <span class="red">Минимум оборудования для экстренной связи:</span><br><br>
    </a>

    <a href="https://drive.google.com/file/d/11sizlZtLJ4HhM84KqX5G8xlQRxojaaq5/view?usp=sharing" title="Изображение">
        <span class="red">Схема аудиокабеля:</span><br><br>
    </a>

    <p>Для увеличения дальности действия также была применена автомобильная радиостанция <a href="http://kenwood-radio.su/kenwood/raciya_automobile_vhf_uhf/kenwood_tk-7108_ekspluatatsii_usloviyah_uverennost.htm" title="Изображение">
        <span class="red">KENWOOD TK-7108H</span></a> и внешняя антенна на магните, настроенная на частоту 159.775 МГц. При питании от 12 вольт и
        потреблении до 14 ампер эта радиостанция выдает 50 ватт выходной мощности, но так как в ней нет встроенный VOX, ее пришлось спаять отдельно и подключить
        вместо выносного микрофона. Это позволило значительно увеличить дальность действия по сравнению с носимой рацией BAOFENG U82R, и если радиостанция установлена в машине, то
        при подключении платы VOX и смартфона, машина, расположенная в зоне действия сотовой сети, превращается в достаточно мощный подвижный ретранслятор. Удалившись от которой с
        носимой станцией туда, где абсолютно нет связи, но есть более-менее прямая видимость на машину, можно звонить в сотовую сеть. (если бы удалось получить доступ к
        MediaRecorder.AudioSource.VOICE_DOWNLINK то можно было бы очень просто анализировать амплитуду сигнала говорящего с сотовой сети (это уже реализовано для теста блокировки микрофона)
        и по превышению порога управлять вспышкой которая в свою очередь в самом простом случае через фотодиод ставила бы радиостанцию на передачу и тогда удалось бы сделать стабильную
        програмную VOX с настраиваемым порогом и длительностью и необходимость в вспомогательной плате VOX отпала бы но как говорится в документации выполнить захват аудиопотока восходящего
        и нисходящего канала могут только системные приложения и на всех современных смартфонах эта возможность недоступна обычным приложениям. Можно попробавать установить рут права и
        сделать это приложение системным если это получится то это может сильно расширить возможности приложения например можно будет перезагружать радиомодуль что может быть полезно при
        слабом сигнале сотовой сети, и возможно добиться полной работы в фоне так чтобы система не убивала приложение но самое полезное было получить доступ к VOICE_DOWNLINK  для програмной VOX
        ну а если и VOICE_UPLINK то тогда легко полностью записывать весь разговор а потом воспроизводить его если это необходимо. Как говорится есть вещи возможные а есть невозможные просто
        невозможные требуют больше времени.)
    </p>

    <a href="https://drive.google.com/file/d/1d6js4z3h0Y_NXPMUgzfQYXGCZo6B0C2W/view?usp=sharing" title="Изображение">
        <span class="red">Схема принципиальная платы согласования и VOX:</span><br><br>
    </a>

    <a href="https://drive.google.com/file/d/1xChV4KRfQM9zpfjc460QIvv71oMy0EhT/view?usp=sharing" title="PDF_файл">
        <span class="red">Схема KENWOOD TK-7108H:</span><br><br>
    </a>

    <p>Расстояние, на которое работает данное устройство
        складывается из двух расстояний: ПЕРВОЕ — это расстояние от точки базовой станции
        до места уверенного приема сотовой сети, и на этом месте устанавливается
        радиомост, обычно это возвышенность, с которой есть прямая видимость на вышку
        сотовой связи и есть более-менее прямая видимость на то место, которое
        необходимо обеспечить связью, и ВТОРОГО расстояния: зоны действия радиостанций.
    </p>
    <p>Этот радиомост разрабатывался для фазенды,
        расположенной в горном ущелье. Схема приведена на карте:
        с помощью приложения Google Earth и ее функции показать профиль рельефа можно видеть,
        что прямая видимость перегорожена выступающей горой.<br><br>
    </p>

    <a href="https://drive.google.com/file/d/1qBOe4xvxxUhhIaf6h3UyjvAAlt5hIs6w/view?usp=sharing" title="Изображение">
        <span class="red">Схема расположения 1</span><br><br>
    </a>

    <p>Схема расположения на местности:
        можно видеть, что с места, где расположен радиомост, есть прямая
        видимость как на вышку, так и на фазенду.<br><br>
    </p>

    <a href="https://drive.google.com/file/d/1i5i7Xez_UITY0DOYG1stXHFgQJ1PB0OO/view?usp=sharing" title="Изображение">
        <span class="red">Схема расположения 2</span><br><br>
    </a>

    <p><span class="blue">Методика расчета и выбора точки установки репитера с помощью приложения Планета Земля:<br> 1. Протягивается линия
        от точки уверенного приема сотовой сети (назовем ее А) до точки, которую необходимо обеспечить связью (назовем ее С) (сохраняем).<br>
        2. Нажимая на эту линию в левом окне правой кнопкой мыши, выбираем пункт "Показать профиль рельефа".<br> 3. Смотрим, что именно
        загораживает прямую видимость, допустим, это гора или выступающий холм (замечаем это место, назовем точка В).<br> 4. Не закрывая окно
        с профилем рельефа, нажимаем правой кнопкой мыши на линии и выбираем "Свойства".<br> (Теперь один из концов линии (там, где С) мы можем
        перемещать, одновременно просматривая, как меняется профиль рельефа).<br> 5. Устанавливаем конец линии в точку "В" (точка перегиба),
        фиксируем и продолжаем тянуть линию до точки (С) (устанавливаем).<br> 6. Возвращаемся к точке В и перемещаем ее в наиболее выгодное место,
        смотря на график "Профиль рельефа".<br> (Чтобы с точки В была прямая видимость на точку А и точку С, а график перегиба был по возможности
        острее).<br>7. В этой точке В устанавливается репитер (также учитываются условия доступности для обслуживания, например, в зимнее время).</span>
    </p><br>

    <p>Выбор подходящего смартфона: (Версия андроид системы должна быть не ниже 6.0)<br>
        (1) Установите приложение на телефон и дайте ему все разрешения. Оно должно установиться взамен стандартной звонилки. Выполните звонок на любой
        номер. Если происходит откат и звонок выполняется с стандартной звонилки, приложение потеряет половину функционала. Если это происходит, смартфон
        не подходит для приложения.<br><br>
        (2) Если отката не происходит и звонок выполняется с приложения, пусть тот, кому позвонили, поднимет трубку, и если в приложении надпись "Супертелефон"
        сменилась на красную напись <span class="red">"Блокировка MIC"</span> (измеряется амплитуда сигнала с микрофона и если она равна 0 значит микрофон блокируется)
        это означает что право слушать микрофон отнимается системой, соответсвенно во время попытки дозвониться и потом во время беседы, будет не возможо анализировать
        входящие DTMF команды и начав выполнение вызова придется дожидаться окончания попытки а если трубку подняли не будет возможности положить ее с рации и придется
        просить второго абонента положить трубку (если он не положит трубку то соедение не будет разорвано)<br><br>
        (3) Желательно использовать более старые флагманские оригинальные неубиваемые смартфоны. Разъем гарнитуры должен быть абсолютно исправен, и при
        подключении аудиокабеля должно произойти переключение смартфона в беззвучный режим, а при извлечении кабеля должен включиться нормальный режим. Если
        этого не происходит, надо попробовать подключить обычные новые наушники. Если переключение произошло, значит, проблема в аудиокабеле, и потребуется
        изменить сопротивления согласовывающих резисторов, чтобы аудиокабель определился как наушники.<br><br>
        (4) При входящем вызове на проверяемый смартфон помимо речевого сообщения "Внимание вам звонит такой-то примите или отклоните вызов" не должно быть других
        тонов или сигналов (именно в наушники) иначе они будут мешать принять входящий вызов по крайней мере будут это затруднять (на смартфоне VIVO 1902 это особенность
        данной модели в наушники во время входящего вызова переодически подаются тональные сигналы и их не удается убрать регулировкой громкости аудиопотоков) Что бы при такой
        ситуации поднять трубку надо просто зажать и удерживать PTT + (*) дольше обычного и как только радиостанция репитера перейдет на прием трубка будет поднята<br><br>

        Проверенные смартфоны:<br>
    <p><span class="green">VIVO , модель vivo1902, версия андроид 9, версия ПО PD1901F_EX_A_1.59.1, процессор 2.3ГГц Восьмиядерный,
        версия ядра 4.9.117+ Все устанавливается и работает, микрофон не блокируется. Полностью подходит. (небольшие неудобства при приеме входящего вызова)</span>
    </p>
    <p><span class="green">HUAWEI P10 Lite, модель WAS-LX1, версия андроид 8.0, номер сборки WAS-LX1 8.0.0.399(C10), процессор Kirin 685,
        версия ядра 4.4.23+ Все устанавливается и работает, микрофон не блокируется. Полностью подходит.</span>
    </p>
    <p><span class="orange">GALAXY A21S, версия андроид 12, номер сборки SP1A.210812.016.A217FXXSCDXE2, версия ядра 4.19.132-24202344
        Все устанавливается и работает, но микрофон блокируется. Работать будет, но с рации во время разговора будет невозможно положить трубку.</span>
    </p>
    <p><span class="orange">GALAXY S21 Ultra 5G, версия андроид 14 номер сборки UP1A.231005.007.G998BXXSEGXL2, версия ядра 5.4.242-28575149-adG998BXXSEGXL2
        Все устанавливается и работает, но микрофон блокируется. Работать будет, но с рации во время разговора будет невозможно положить трубку.</span>
    </p>
    <p><span class="orange">GALAXY A52, версия андроид 14 номер сборки UP1A.231005.007.A525FXXSAFYB1, версия ядра 4.14.190-pref-28693687-fdA525FXXSAFYB
        Все устанавливается и работает, но микрофон блокируется. Работать будет, но с рации во время разговора будет невозможно положить трубку.</span>
    </p>
    <p><span class="orange">Blackview BV8900, версия андроид 13 номер сборки BV8900_NEU_S920_V1.0_01_20230815V03 Все устанавливается и работает, но
        микрофон блокируется. Работать будет, но с рации во время разговора будет невозможно положить трубку. (данный смартфон не имеет аудиоразьема
    потребуется доработка кода для соеденения с рацией по Bluetooth)</span>
    </p>
    <p><span class="red">HUAWEI Y6, модель CAM-L21, версия андроид 6.0, номер сборки CAM-L21C10B, процессор Kirin 620,
        версия ядра 3.10.86 Микрофон не блокируется, но во время звонка происходит откат к стандартной звонилке (проверкой было установка
    любой сторонней звонилки, система не принимает замену). Не подходит</span>
    </p><br>

    <p>Настройки радиостанций Baofeng U82R:<br><br>

        <a href="https://drive.google.com/file/d/1WnFZ5FZXDRgZsLve9uZgDw2WCi61KS6E/view?usp=sharing" title="PDF документ">
                <span class="red">Скачать
                руководство
                пользователя Baofeng U82R</span><br><br>
        </a>

        <a href="https://drive.google.com/file/d/1u66T7SBYeXkZaLAckEX_Jmz_gZJu3VTz/view?usp=sharing" title="PDF документ">
                <span class="red">Скачать
                схему
                радиостанции Baofeng UV-5R</span><br><br>
        </a>
    </p>
    <p>Радиостанция
        <strong>Репитера:</strong>
    </p>
    <p>Ее настройки:
        (0) SQL 5 (1) STEP 2.5K (2) TXP HIGH (3)
        SAVE OFF <span class="red">(4) VOX ON(1)</span>
        (5) WN WIDE (6) ABR
        10 <span class="red">(7) TDR ON</span>
        (8) BEEP ON (9) <span class="red">TOT
                600</span>
        (10) R-DCS OFF <span class="red">(11)
                R-CTCS 123.0Hz</span>
        (12) T-DCS OFF <span class="red">(13)
                T-CTCS 123.0Hz</span>
        (14) VOICE OFF (15) ANI-ID 80808 <span class="red">(16)
                DTMFST DT-ST</span>
        (17) S-CODE 1 (18) SC-REV TO (19) PTT-ID
        OFF (20) PTT-LT 5 (21) MDF-A FREQ (22)
        MDF-B FREQ (23) BCL OFF (24) AUTOLK OFF
        (25) SFT-D OFF (26) OFFSET 000.000 <span class="red">(27)
                MEM-CH CH-001
                (433.075 МГц)</span>
        (28) DEL-CH CH-002 (29) WT-LED PURPLE
        (30) RX-LED BLUE (31) TX-LED ORANGE (32)
        AL-MOD TONE (33) BAND VFN (34) TDR-AB
        OFF (35) STE ON (36) PR-STE 5 (37)
        PRT-RL OFF (38) PONMGS FULL (39) ROGER
        OFF (40) RESET ALL (41) R-TONE 1750Hz.
    </p>
    <p>Радиостанция
        <strong>Абонента:</strong>
    </p>
    <p>Ее настройки:
        (0) SQL 5 (1) STEP 2.5K (2) TXP HIGH (3)
        SAVE OFF (4) VOX OFF (5) WN WIDE (6) ABR
        10 (7) TDR ON (8) BEEP ON (9) <span class="red">TOT
                600</span>
        (10) R-DCS OFF <span class="red">(11)
                R-CTCS 123.0Hz</span>
        (12) T-DCS OFF <span class="red">(13)
                T-CTCS 123.0Hz</span>
        (14) VOICE OFF (15) ANI-ID 80808 (16)
        DTMFST OFF (17) S-CODE 1 (18) SC-REV TO
        (19) PTT-ID OFF (20) PTT-LT 5 (21) MDF-A
        FREQ (22) MDF-B FREQ (23) BCL OFF (24)
        AUTOLK OFF (25) SFT-D OFF (26) OFFSET
        000.000 <span class="red">(27) MEM-CH
                CH-001 (433.075 МГц)</span>
        (28) DEL-CH CH-002 (29) WT-LED PURPLE
        (30) RX-LED BLUE (31) TX-LED ORANGE (32)
        AL-MOD TONE (33) BAND VFN (34) TDR-AB
        OFF (35) STE ON (36) PR-STE 5 (37)
        PRT-RL OFF (38) PONMGS FULL (39)
        ROGER OFF
        (40) RESET ALL (41) R-TONE 1750Hz.
    </p>

    <p>
        Коды удаленного управления с радиостанции:<br><br>
        <span class="blue">PTT + 0*</span> Последний пропущенный вызов<br><br>
        <span class="blue">PTT + 1*</span> Текущие время и дата<br><br>
        <span class="blue">PTT + 2*</span> Состояние аккумулятора<br><br>
        <span class="blue">PTT + 3*</span> Очистить номера быстрого набора<br><br>
        <span class="blue">PTT + 4*</span> Прочитать последнюю входящую СМС<br><br>
        <span class="blue">PTT + 5*</span> Голосовой поиск абонента в контактах с последующим вызовом<br><br>
        <span class="blue">PTT + 5#</span> Голосовой поиск абонента в контактах с последующим удалением<br><br>
        <span class="blue">PTT + 7*</span> Создание голосовых заметок <strong>(Обязательно после окончания произнесения не отпуская PTT надо нажать # (решетку) иначе запись
        не остановится)</strong> В первую очередь предназначена для контроля и настройки уровня громкости радиостанции репитера, так как по команде 9* можно прослушивать
        самого себя (если при воспроизведении VOX отключается можно поднять громкость радиостанции репитера) и проверке на наличии искажений и шумов. Можно записать
        контрольную заметку при отключенном аудиокабеле звук запишется максимально чистым и потом записать вторую заметку уже все подключив и говоря в рацию абонента а затем
        сравнить записи если отличий практически нету это указывает на очень хорошее согласование и правильный уровень громкости, если вторая запись прослушивается намного хуже
        чем первая например присутствует шум свист искажения посторонние звуки это может говорить о недостаточном экранировании кабеля и неправильно подобраном уровне громкости.
        Можно использовать для определения точек где связь не стабильна, называя место и номер записи. Или как голосовая записная книжка. Также если в радиусе действия репитера
        находится несколько радиостанций то можно использовать эту команду для отправки голосовых сообщений называя адресата а затем он на своей рации сможет прослушать адресованное
        ему сообщение и наоборот<br><br>
        <span class="blue">PTT + 8*</span> Удаление голосовых заметок (по одной или все сразу)<br><br>
        <span class="blue">PTT + 9*</span> Прослушать голосовые заметки<br><br>

        После набора номера и нажатия (*):<br>
        <span class="blue">PTT + 1</span> Выполнить вызов с первой сим-карты<br><br>
        <span class="blue">PTT + 2</span> Выполнить вызов со второй сим-карты<br><br>
        <span class="blue">PTT + 4</span> Отправить на набранный номер надиктованную СМС<br><br>
        <span class="blue">PTT + 5</span> Добавить набранный номер в книгу контактов<br><br>

        Служебные команды (значения 2500мс (рекомендуется не менять) и 50мс для VOX установлены по умолчанию)<br>
        <span class="blue">PTT + 11*</span> Настройка VOX: Отсчет от 1 до 10 без активирующего тона, способ по <a href="https://drive.google.com/file/d/15zGr8J5BCpaxqLzTa94LGSvQAgXNUct7/view?usp=sharing" title="Изображение">
        <span class="red">Диаграмме</span></a><br><br>
        <span class="blue">PTT + 22*</span> Настройка VOX: При выполнении этой команды через введенный период (рекомендуется 2500мс фактически будет
        установлен период на 100мс меньше) проигрываются DTMF тона от 0 до 9 длительностью установленной с помошью команды PTT + 55 (рекомендуется 50мс) что
        активирует срабатывание VOX, при правильно настроенном <strong>НИЖНЕМ</strong> пороге времени удержания <strong>не должно происходить переключение
        радиостанции репитера на прием все 10 тонов должны быть слышны в рации абонента </strong>если происходит переодическое переключение на прием то
        нужно увеличить время удержания VOX<br><br>
        <span class="blue">PTT + 33*</span> Настройка VOX: При выполнении этой команды с периодом установленным командой PTT + 22 (рекомендуется 2500мс
        фактически будет установлен период на 100мс больше) проигрываются DTMF тона от 0 до 9 длительностью установленной с помошью команды
        PTT + 44 (рекомендуется 50мс) что активирует срабатывание VOX, при правильно настроенном <strong>ВЕРХНЕМ</strong> пороге времени удержания
        <strong>радиостанция репитера десять раз должна переключится с передачи на прием ни один из 10 тонов не должен быть слышен в рации абонента
        </strong>если тона слышны то нужно уменьшить время удержания VOX<br><br>
        <span class="blue">PTT + 44*</span> Измерение двух параметров: (1) Длительности сигнала которое требуется для срабатывания VOX и (2) Времени открытия
        шумоподавителя на радиостанции абонента. При выполнении этой команды на протяжении введенной длительности будет проигран одиночный DTMF тон цифры 0
        что заставит VOX включить радиостанцию репитера на передачу <strong>Минимальное значение при котором радиостанция репитера включается на передачу и
        будет временем достаточным для срабатывания VOX </strong>затем для контроля правильности установленной длительности прозвучит речевое сообщение. Чтобы
        измерить общее время до момента открытия шумоподавителя нужно постепенно увеличивать длительность тона. <strong>Минимальная длительность при которой
        тон начнет появлятся в радиостанции абонента и есть время достаточное для открытия шумоподавителя</strong> (Если используются субтона то время открытия
        шумоподавителя возрастает так как сигнальному процессору требуется время на распознание. При установленном субтоне 123.0гц приемлемым значением можно
        считать 150-200мс если оно выше это может указывать на неточную настройку по частоте  либо на проблемы с приемником радиостанции абонента. Если
        радиостанция репитера встает на передачу от тона длительностью 5мс а в рации абонента тон начинает появляться при 450-500мс это слишком большая задержка
        которая будет создавать потерю первых слов каждого предложения звонящего из сотовой сети)<br><br>
        <span class="blue">PTT + 55*</span> Проигрывание DTMF тонов от 0 до 9 длительностью 300мс с периодом 300мс (Проверку слышимости производить на открытом канале) <strong>
        Позволяет проверить гальваническую развязку аудиовыхода смартфона с его микрофонным входом. При выполнении команды и подключенной радиостанции в поле набора не должны
        набираться цифры.</strong> Если цифры набираются в дальнейшем возможен самопроизвольный набор случайных цифр от любых звуков или даже просто от шума на аудиовыходе
        (такое поведение как раз указывает на отсутсвие гальванической развязки что создает неудобство в работе и даже может привести к самопроизвольному звонку на случайный номер,
        а также искажениям при создании голосовых заметок, при сборке аудиокабеля сам по себе и в идеале при подключенной радиостанции он не должен создавать гальванической связи
        между аудиовыходом и аудиовходом иначе могут появиться вышеперечисленные проблемы) При правильном согласовании на протяжении дней и недель не должно происходить случайной печати.
        Но без гальванической связи будет невозможен селективный вызов, поэтому нужно решить проблему случайной печати при гальванической связи<br><br>
        <span class="blue">PTT + 58*</span> Прямой ввод частоты для генератора тонов CTCSS <strong>(например: при вводе 2541 будет сгенерирована тональность с чистым синусом
        254.1гц Понижение частоты требует увеличения амплитуды)</strong> Все манипуляции требуется производить с радиостанции у которой субтона на прием и на передачу отключены
        Также если станция репитера на прием не закрыта никаким субтоном но с такой-же станции на которой стоял субтон на передачу 123.0гц репитер принимал с сильными искажениями
        почему-то в то же время с дешевой рации искажений не было<br><br>
        <span class="blue">PTT + 58#</span> Остановка генератора субтонов CTCSS<br><br>
        <span class="blue">PTT + 66*</span> Добавить амплитуду субтона. <strong>Амплитуда не должна превышать порог отрытия VOX иначе во время подьема трубки рация не сможет переключаться на прием
        и может возникнуть ситуация зависания на передаче хотя это не фатально но не позволит разговаривать.</strong> При речевых сообщениях и голосовых записях если амплитуда субтона превышает порог открытия
        VOX это идет на пользу так как устраняет проблему проглатывания первых букв речевых сообщений так как по нажатию звездочки рация сразу сразу, заранее встает на передачу от субтона (тон активации в этом случае
        не требуется и его можно отключить установив в 0) и лишь потом начинает звучать сообщение. а после завершения субтон принудительно отключается и не может удерживать VOX включенной Решение этой
        проблемы видится в подаче субтона например по правому аудиоканалу а всего остального по левому и потом при включении радиостанции репитера на передачу в подмешивании субтона на аудиовход радиостанции,
        в данный момент все и речь и сообщения и субтона подаются в один левый канал (програмное разделение каналов может привести к реализации програмной VOX и упрощению платы согласования и VOX например
        подача тона через усилительный каскад будет включать оптрон который в свою очередь будет ставить радиостанцию репитера на передачу но это только для системы не использующей субтона то есть имеющей всего
        одного абонента) Проще всего использовать радиостанцию имеющюю встроенную VOX тогда плата вообще становится не нужна требуется только согласование аудиовыходов<br><br>
        <span class="blue">PTT + 66#</span> Уменьшить амплитуду субтона (именно при поднятой трубке амплитуда субтона должна обеспечивать стабильное срабатывание но обязательно должна быть на несколько
        порядков ниже порога включения VOX иначе сам субтон будет включать радиостанцию репитера на передачу)<br><br>
        <span class="blue">PTT + 77*</span> Добавить громкость речевых сообщений<br><br>
        <span class="blue">PTT + 77#</span> Уменьшить громкость речевых сообщений<br><br>
        <span class="blue">PTT + 88*</span> Добавить громкость вызова<br><br>
        <span class="blue">PTT + 88#</span> Уменьшить громкость вызова<br><br>
        <span class="blue">PTT + 99*</span> Ввод длительности тона активации VOX<br><br>
        <span class="blue">PTT + 1379*</span> Разблокировать служебные команды<br><br>
        <span class="blue">PTT + 1379#</span> Заблокировать служебные команды<br><br>
        <span class="blue">PTT + 9999*</span> Обьем свободной памяти<br><br>
        <span class="blue">PTT + F</span> Мигание сигнальной вспышкой Если необходим подтверждающий сигнал (не слышен если включена генерация субтонов) его можно
        включить командой 555 перед PTT + F<strong>Команда 111 перед PTT + F Включит определение одной из четырех радиостанций по тону: (сразу включится дополнительный
        режим обмена голосовыми сообщениями и например с 1 рации можно будет отправить речевое сообщение на 2,3,4 адресат получит уведомление о голосовом сообщении
        и наоборот. Поменяется принцип работы команд 7* и 9* прослушать можно будет только последнее сообщение)
        1000гц - 1 радиостанция сразу произойдет переключение субтона на 203.5гц . 1450гц - 2 радиостанция сразу произойдет переключение субтона на 218.1гц.
        1750гц - 3 радиостанция сразу произойдет переключение субтона на 233.6гц. 2100гц - 4 радиостанция сразу произойдет переключение субтона на 250.3гц</strong>
        Для отключения подтверждающего сигнала и отключения CTCSS тонов нужно набрать 000 и потвердить командой PTT + F <br><br>
    </p>

    <p>
        Если планируется использовать на стороне удаленного абонента больше одной радиостанции, например, нужно обеспечить связью несколько точек,
        находящихся на удалении друг от друга. Для этого потребуется на всех радиостанциях лишь настроить рабочую частоту, при этом каждый сможет
        звонить в сотовую сеть, но минусом данного подхода является то, что все будут слышать друг друга, и у всех будет возможность конференц-связи
        друг с другом (этот подход может быть хорош при коллективных походах в горы, когда такой режим становится желательным). Для селективного
        вызова каждой отдельной радиостанции после набора номера смартфона репитера при включенном многоканальном режиме, произойдет автоподьем трубки
        и прозвучит речевое сообщение "Введите номер радиостанции" на том телефоне с которого звонят нужно открыть клавиатуру и ввести соответствующий
        номер (от 1 до 50) после ввода номера к речевому сообщению "Внимание вам звонит абонент такой-то примите или отклоните вызов" и в дальнейшем до
        конца вызова или до конца беседы совместно с речью будет передаваться соответсвующая субтональность что заставит открыться шумоподавитель именно
        той радиостанции чей заранее установленый субтон совпадет с тональностью передаваемой репитером, пока не доделано, чтобы это получилось потребуется
        решить по меньшей мере четыре проблемы:<br><br>
        (1) <strong>ОБЕСПЕЧИТЬ ДОНАБОР НОМЕРА</strong> для этого нужно создать гальваническую связь между аудиовыходом смартфона и
        микрофонным входом это можно сделать обычным резистором (например 45к) <strong>это позволит при звонке из сотовой сети открыв дополнительную клавиатуру
        набирать любые цифры в приложении при поднятой трубке</strong> (проблемой является то что при налии гальванической связи и при наличии звука совпадающего или
        имеющего гармоники DTMF тональностей начинают печататься случайные числа что мешает вводу и если проскочит тон # то самопроизвольно и непредсказуемо
        завершиться вызов, Возмозжно для решения этой проблемы потребуется сборка RC фильтра или увеличение сопротивления гальванической связи)<br><br>
        (2) <strong>В АУДИОПОТОК ВЫЗОВА ПРОИЗНЕСТИ ВЫБЕРИТЕ НУЖНУЮ РАДИОСТАНЦИЮ</strong> то есть организовать автоподьем трубки (решается просто) и даное речевое сообщение
        Проблемой может стать то что стандартные API не предоставляют такой возможности, использование AudioManager.STREAM_VOICE_CALL в паре с AudioTrack.MODE_STREAM позволяет выдать
        нужный звук в наушники смартфона на котором установлено приложение но его надо подать в микрофонный вход чтобы его мог услышать звонящий из сотовой сети,
        что является сложной задачей <strong>(Если удастся решить эту и первую проблему то у звонящего из сотовой сети после автоподьема трубки появится возможность удаленно по донабору
        контролировать все параметры приложения: Например по команде 2* узнать состояние аккамулятора по команде 9* прослушать все речевые записи и даже оставить свою запись,
        Можно реализовать все на что хватит фантазии, единственно придется перенести команду очистки поля ввода именно на момент разговора на другую клавишу так как # разрывает
        соеденение)</strong><br><br>
        (3) <strong>В ИДЕАЛЕ ОБЕСПЕЧИТЬ МГНОВЕННОЕ РАСПОЗНАВАНИЕ (сделать) И ГЕНЕРАЦИЮ ЛЮБОГО СУБТОНА (сделано)</strong> в данный момент реализовано распознавании одиночной частоты (1000гц, 1450гц,
        1750гц, 2100гц тонов включения репитера настройка 41 рации Baofeng U82R) и команды PTT + F это позволяет определить с какой из четырех радиостанций пришел сигнал и затем переключить
        и зафиксировать субтон репитера на передачу. <strong>Если поступил тон 1000 гц задается субтон 203.5, если поступил тон 1450 гц задается субтон 218.1, если поступил тон 1750 задается субтон 233.6,
        если поступил тон 2100гц задается субтон 250.3</strong> Выбраны более высокие частоты так генерация низких частот требует большей аплитуды и соответсвенно происходит большее отклонение от идеальной
        синусоиды что в дальнейшем на больших расстояниях связи приводит к нестабильной работе Так как субтонов 50 а вызывных тонов в рации Baofeng u82r всего 4 а чтобы распознавать субтона в режиме
        реального времени потребуется во первых подключение смартфона на выход дискриминатора то есть до фильтра который устраняет субтона из звукового тракта и потом появится проблема что этот
        низкочастотный тон будет идти в микрофон смартфона и соответсвенно во время беседы его будет слышать звонящий из сотовой сети. То есть в текущей ситуации есть возможность определить и выдать
        речевое сообщение или голосовую запись на любую из четырех радиостанции хотя в идеале их может быть 50 так как в рации Baofeng u82r субтонов CTCSS пятьдесят<br><br>
        (4 по желанию) <strong>ОТРЕЗАТЬ ШУМОВОЙ ХВОСТ ЕСЛИ В РЕПИТЕРЕ ИСПОЛЬЗУЕТСЯ РАДИОСТАНЦИЯ НЕ ОНАЩЕННАЯ CTCSS</strong> Этого можно достичь решив 4 проблему и затем
        генерируя по завершении речевых сообщений и звуковых записей тон с фазой изменненной на 180 градусов (описание в нижеприведенной статье про CTCSS кодирование)<br><br>
        <strong>Если эти проблемы удастся решить то наградой будет селективный вызов нужной радиостанции с сотовой сети и возможность разворачивания сети
        радиостанций с одним репитером у которого субтон на передачу и на прием не задан. Также у каждого абонента имеющего радиостанцию появится возможность звонить в
        сотовую сеть так что его не будут слышать другие (на всех радиостанциях потребуется включение запрета вызова на занятой частоте) и в идеале количество абонентов
        подключенных к одному репитеру сможет достигать 50 так как в рации Baofeng u82r субтонов 50. При такой реализации не сложно реализовать удаленное отключение нужной радиостанции
        по команде звонящего из сотовой сети либо всех сразу если это потребуется</strong><br><br>
        Ограничениями данного подхода станут: (1) невозможность одновременной беседы более одного абонента остальным придется дожидаться окончания беседы (2) Возможность
        легкого прослушивания разговоров, достаточно будет знать частоты каналов а субтона отключить (3) при продвинутых пользователях которые могут менять настройки радиостанций
        возможно легкое клонирование частот и субтонов посторонними радиостанциями и соответсвенно возможность подключения к репитеру и возможность бесплатно звонить в сотовую
        сеть за счет владельца репитера (4) чтобы вызвать разные радиостанции звонить нужно будет на один сотовый номер что открывает возможность звонить на любую радиостанцию входящую
        в сеть добрав ее номер. Также звонок от разных радиостанций также будет приходить с одного сотового номера что в принципе не является большой проблемой
    </p>

    <p>
        <span class="red"> Внимание! При селективном вызове когда станция репитера не имеет субтонов на прием и на передачу а генерация субтона происходит в приложении.
        станция абонента не должна иметь субтон на передачу так как хотя репитер будет принимать данный сигнал возможны его сильные искажения это наблюдалось когда стация репитера была
        KENWOOD TK-7108H а станция абонента Icom (дописать номер) кенвуд имела открытый канал а айком имела субтон 123.0гц на передачу и на прием при выполнении контрольной записи произвольного
        речевого сообщения запись происходила с сильными искажениями и даже просто DTMF команды проходили с искажениями вплоть до невозможности набрать номер.
        Поэтому если станция репитера на прием не закрыта субтоном станция абонента не должна иметь какойто субтон на передачу. Если абонент один лучше отказаться от генерации субтонов
        в приложении а закрывать канал средствами радиостанций либо оставлять каналы открытыми что на больших расстояниях имеет значение,</span>
    </p>

    <p>
        <span class="red">Внимание! При работе данного приложения оно должно всегда находится на переднем плане
            то есть его должно быть видно и в нем экран принудительно удерживается постоянно включенным, это необходимо для
            того, чтобы система не убивала приложение, поэтому для экономии установите минимальную яркость. (возможно на
            некоторых смартфонах не сворачивая приложения экран можно погасить и в течении длительного времени приложение
            не потеряет работоспособность)</span>
    </p>

    <p>
        <span class="red">Внимание! При
                закрытии каналов субтонами возможно искажение DTMF команд,
                субтона закрывают канал от прослушивания, но могут делать DTMF
                срабатывание менее устойчивым. Если это становится критично, то
                лучше выбирать субтона более высокой частоты, либо оставить
                каналы открытыми.</span>
    </p>

    <p>
        <a href="https://github.com/DmitryiTarazKZ/DTMFdialer.git" title="OpenSource">
            Исходный код проекта для Android Studio находится по этой ссылке
            (https://github.com/DmitryiTarazKZ/DTMFdialer.git/)<br>
            (Gmail для связи dimon82r@gmail.com, телеграм 87057895564)</a>
    </p>

    <p>
        <a href="https://gpt-open.ru/gpt-dlya-programmista/programmist" title="OpenSource">
            Доработка приложения велась при использовании ИИ GPT-OPEN для программиста
            (https://gpt-open.ru/gpt-dlya-programmista/programmist/)</a>
    </p>

    <p>
        <a href="https://www.cursor.com/" title="OpenSource">
            И приложения также работающего на основе ИИ Cursor. (https://www.cursor.com/)</a>
    </p>

    <p>
        <a href="https://www.sillanumsoft.org/" title="OpenSource">
            Снятие осцилограмм производилось с помошью измерительного
            комплекса Visual Analyser (https://www.sillanumsoft.org/)</a>
    </p>

    <p>
        <a href="http://www.coaa.co.uk/scanscope.htm" title="OpenSource">
            Контроль правильности генерации субтонов производился с помошью приложения
            ScanScope decodes DCS CTCSS and Selcal (https://www.coaa.co.uk/scanscope.htm)</a>
    </p>

    <p>
        <a href="https://zl2pd.com/CTCSS_encoder.html" title="OpenSource">
            Статья которая реально помогла с селективным вызовом (https://zl2pd.com/CTCSS_encoder.html)</a>
    </p>

    <p>
        <a href="https://drive.google.com/file/d/1i4mKx2VLeH4fzk45LpV9DKZ0SK9QybrV/view?usp=sharing" title="OpenSource">
            ZIP архив не оптимизированной многорежимной версии приложения с исходным кодом проекта для Android Studio и APK файл
            находится по этой ссылке (https://drive.google.com/file/d/1i4mKx2VLeH4fzk45LpV9DKZ0SK9QybrV/view?usp=sharing).</a>
    </p>

</div>
</body>

</html>